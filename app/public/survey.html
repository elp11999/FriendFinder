<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Friend Finder</title>
  <!-- Setup CSS for Bootstrap, JQuery and Font Awesome -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>

<body>

  <div class="container">

    <div class="row">

      <div class="col-lg-12">
        
        <!-- Personal Information -->
        <div class="form-group">
          <label for="name"><h4>Your Name</h4></label>
          <input type="name" class="form-control" id="name">
        </div>

        <div class="form-group">
          <label for="photo"><h4>Your photo link</h4></label>
          <input type="photo" class="form-control" id="photo">
        </div>

        <div class="form-group">
            <h4>Your gender</h4>
            <select class="mdb-select md-form colorful-select dropdown-primary" id="gender">
              <option value="1">Male</option>
              <option value="2">Female</option>
              <option value="3">Other</option>
            </select>
        </div>
        <hr>

        <!-- Gender picker -->
        <div class="form-group">
            <h6>What gender are your interested in?</h6>
            <select class="mdb-select md-form colorful-select dropdown-primary" id="desired-gender">
              <option value="1">Male</option>
              <option value="2">Female</option>
              <option value="3">Other</option>
              <option value="4">Pick for me</option>
            </select>
        </div>

        <!-- Survey Information -->
        <h4>Survey Questions</h4>

        <div class="survey-question">
            <p><h6>1. You spend too much time on FaceBook.</h6></p>
            <select class="mdb-select md-form colorful-select dropdown-primary" id="sq1">
              <option value="">Select Answer</option> 
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>

        <div class="survey-question"> 
            <p><h6>2. You feel gun control laws are too strict.</h6></p>
            <select class="mdb-select md-form colorful-select dropdown-primary" id="sq2">
              <option value="">Select Answer</option> 
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>

        <div class="survey-question">  
            <p><h6>3. You like to drink wine with dinner.</h6></p>
            <select class="mdb-select md-form colorful-select dropdown-primary" id="sq3">
              <option value="">Select Answer</option> 
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>

        <div class="survey-question"> 
            <p><h6>4. You belive Donald Trump will get his wall built.</h6></p>
            <select class="mdb-select md-form colorful-select dropdown-primary" id="sq4">
              <option value="">Select Answer</option> 
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>

        <div class="survey-question"> 
            <p><h6>5. You believe Rap is music.</h6></p>
            <select class="mdb-select md-form colorful-select dropdown-primary" id="sq5">
              <option value="">Select Answer</option> 
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>

        <div class="survey-question"> 
            <p><h6>6. Religion is an important part of your life.</h6></p>
            <select class="mdb-select md-form colorful-select dropdown-primary" id="sq6">
              <option value="">Select Answer</option> 
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>

        <div class="survey-question">   
            <p><h6>7. You enjoy bathroom humor.</h6></p>
            <select class="mdb-select md-form colorful-select dropdown-primary" id="sq7">
              <option value="">Select Answer</option> 
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>

        <div class="survey-question"> 
            <p><h6>8. You would like to space travel.</h6></p>
            <select class="mdb-select md-form colorful-select dropdown-primary" id="sq8">
              <option value="">Select Answer</option> 
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>

        <div class="survey-question"> 
            <p><h6>9. You feel that socialism is superior to capitalism.</h6></p>
            <select class="mdb-select md-form colorful-select dropdown-primary" id="sq9">
              <option value="">Select Answer</option> 
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>

        <div class="survey-question">  
            <p><h6>10. You enjoy watching sports on television.</h6></p>
            <select class="mdb-select md-form colorful-select dropdown-primary" id="sq10">
              <option value="">Select Answer</option> 
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
      </div>
    </div>
    <br>
    <button class="btn btn-primary btn-lg btn-block" id="survey-button"><span class="fa fa-check-circle-o"></span> Submit</button>
    <hr>
    
    <a href="api/friends">Api Friends List</a>
  </div> 
  
  <!-- Search Result Modal Dialog -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h3 class="modal-title">Friend Finder</h3>
        </div>
        <div class="modal-body">
          <h2><span>Meet your new friend</h2>
          <h2 id="new-friends-name"><strong></strong>.</h2>
          <img id="new-friends-image" src="" alt="new-friends-image" width="125" height="150">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div> 

   <!-- Javascript to handle the users input -->
  <script type="text/javascript">

    // Object to hold survey information
    var surveyInfo = {
      name: "",
      photo: "",
      gender: "",
      desiredGender: "",
      scores:
       [ "",
         "",
         "",
         "",
         "",
         "",
         "",
         "",
         "",
         ""
       ]
    };

    // Function to check for missing user input
    function checkUserInput() {

      // Check for name
      surveyInfo.name = $("#name").val().trim(); 
      if (surveyInfo.name.length == 0)
        return false;       

      // Check for photo
      surveyInfo.photo = $("#photo").val().trim(); 
      if (surveyInfo.photo.length == 0)
        return false;

      // Get Gender
      surveyInfo.gender = $("#gender").val().trim(); 

      // Get desired Gender
      surveyInfo.desiredGender = $("#desired-gender").val().trim(); 
      
      // Check all survey questions
      for (var i = 0; i < 10; i++) {
        surveyInfo.scores[i] = $("#sq" + (i + 1)).val().trim();
        if (surveyInfo.scores[i].length == 0)
          return false;
      }

      // All the survey information was provided
      return true;
    }

    // Process survey button
    $("#survey-button").on("click", function(event) {
      event.preventDefault();

      // Ensure we have all the survey information
      if (checkUserInput() == false) {
        alert("Please enter all survey information.");
        return;
      }
      //console.log(surveyAnswers);

      // Post survey answers to the server
      $.post("/api/friends", surveyInfo)
          .then(function(data) {
            //console.log("survey", data);

            // Display modal dialog with the new friends name and image
            $("#new-friends-name").text(data.name);
            $("#new-friends-image").attr("src", data.photo);
            $("#myModal").modal();
          });
  });
  </script>

</body>
</html>
